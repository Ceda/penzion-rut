---
export const prerender = true;

import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
import { getImage } from "astro:assets";
import { ROUTES } from "../config/routes";
import { getAllImages } from "../utils/images";

// Načti obrázky z jednotlivých složek
const historieImagesAll = import.meta.glob<{ default: ImageMetadata }>(
  "../images/historie/*.{jpg,JPG}",
  { eager: true }
);
const ubytovaniImagesAll = import.meta.glob<{ default: ImageMetadata }>(
  "../images/ubytovani/*.{jpg,JPG}",
  { eager: true }
);
const stravovaniImagesAll = import.meta.glob<{ default: ImageMetadata }>(
  "../images/stravovani/*.{jpg,JPG}",
  { eager: true }
);
const regataImagesAll = import.meta.glob<{ default: ImageMetadata }>(
  "../images/regata/*.{jpg,JPG}",
  { eager: true }
);
const okoliImagesAll = import.meta.glob<{ default: ImageMetadata }>(
  "../images/okoli/*.{jpg,JPG}",
  { eager: true }
);

// Automaticky načti všechny obrázky ze složek
const historieImages = getAllImages(historieImagesAll);
const ubytovaniImages = getAllImages(ubytovaniImagesAll);
const stravovaniImages = getAllImages(stravovaniImagesAll);
const regataImages = getAllImages(regataImagesAll);
const okoliImages = getAllImages(okoliImagesAll);

// Připrav velké verze pro lightbox
const prepareLargeImages = async (images: any[]) => {
  return await Promise.all(
    images.map((img) => getImage({ src: img, width: 1200, format: "webp" }))
  );
};

const historieLarge = await prepareLargeImages(historieImages);
const ubytovaniLarge = await prepareLargeImages(ubytovaniImages);
const stravovaniLarge = await prepareLargeImages(stravovaniImages);
const regataLarge = await prepareLargeImages(regataImages);
const okoliLarge = await prepareLargeImages(okoliImages);
---

<Layout
  title="Fotogalerie Pension RUT | Ubytování, okolí, historie | Máchovo jezero"
  description="Fotogalerie Pensionu RUT - prohlédněte si historické fotografie, pokoje a apartmány, stravování, okolí Máchova jezera a fotografie z Regaty RUT Classic. Inspirujte se pro vaši dovolenou."
  keywords="fotogalerie Pension RUT, fotky ubytování, pokoje fotografie, Máchovo jezero fotky, historické fotografie, Regata RUT Classic, Staré Splavy galerie"
>
  <!-- Schema.org Breadcrumb markup -->
  <script type="application/ld+json" slot="head">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Hlavní stránka",
          "item": "https://www.pensionrut.cz/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Fotogalerie",
          "item": "https://www.pensionrut.cz/fotogalerie"
        }
      ]
    }
  </script>

  <div id="crumbs">
    Právě se nacházíte: <a href={ROUTES.home}>Hlavní stánka</a> / <a
      href={ROUTES.fotogalerie}>Fotogalerie</a
    >
  </div>

  <h2>Historické fotografie</h2>
  <div class="photoGallery">
    {
      historieImages.map((img, i) => (
        <a
          href={historieLarge[i].src}
          class="galleryPhoto lightbox"
          data-gallery="historie"
        >
          <Image
            src={img}
            alt={`Historická fotografie Pensionu RUT a rodiny Formanů ${i + 1}`}
            width={150}
            height={100}
            widths={[150, 300]}
            sizes="150px"
            format="webp"
            fit="cover"
          />
        </a>
      ))
    }
  </div>

  <h2>Fotografie ubytování pensionu RUT</h2>
  <div class="photoGallery">
    {
      ubytovaniImages.map((img, i) => (
        <a
          href={ubytovaniLarge[i].src}
          class="galleryPhoto lightbox"
          data-gallery="ubytovani"
        >
          <Image
            src={img}
            alt={`Ubytování v Pensionu RUT - pokoje a apartmány ${i + 1}`}
            width={150}
            height={100}
            widths={[150, 300]}
            sizes="150px"
            format="webp"
            fit="cover"
          />
        </a>
      ))
    }
  </div>

  <h2>Stravování</h2>
  <div class="photoGallery">
    {
      stravovaniImages.map((img, i) => (
        <a
          href={stravovaniLarge[i].src}
          class="galleryPhoto lightbox"
          data-gallery="stravovani"
        >
          <Image
            src={img}
            alt={`Stravování v Pensionu RUT - snídaně a večeře ${i + 1}`}
            width={150}
            height={100}
            widths={[150, 300]}
            sizes="150px"
            format="webp"
            fit="cover"
          />
        </a>
      ))
    }
  </div>

  <h2>Regata Rut Classic - Fotogalerie</h2>
  <div class="photoGallery">
    {
      regataImages.map((img, i) => (
        <a
          href={regataLarge[i].src}
          class="galleryPhoto lightbox"
          data-gallery="regata"
        >
          <Image
            src={img}
            alt={`Regata RUT Classic - závod plachetnic na Máchově jezeře ${i + 1}`}
            width={150}
            height={100}
            widths={[150, 300]}
            sizes="150px"
            format="webp"
            fit="cover"
          />
        </a>
      ))
    }
  </div>

  <h2>Okolí - Máchovo jezero</h2>
  <div class="photoGallery">
    {
      okoliImages.map((img, i) => (
        <a
          href={okoliLarge[i].src}
          class="galleryPhoto lightbox"
          data-gallery="okoli"
        >
          <Image
            src={img}
            alt={`Okolí Máchova jezera - příroda a krajina ${i + 1}`}
            width={150}
            height={100}
            widths={[150, 300]}
            sizes="150px"
            format="webp"
            fit="cover"
          />
        </a>
      ))
    }
  </div>
</Layout>
