---
interface WeatherData {
  html: string;
}

let weatherHtml = "";

try {
  const response = await fetch(
    "https://www.machovojezero-ubytovani.info/api/weather"
  );

  if (response.ok) {
    const data: WeatherData = await response.json();
    weatherHtml = data.html;
  }
} catch (error) {
  console.error("Failed to fetch weather data:", error);
}
---

<h3>Máchovo jezero <small>počasí</small></h3>
{
  weatherHtml ? (
    <div class="weather_info" set:html={weatherHtml} />
  ) : (
    <div class="weather_info">
      <p>Počasí se momentálně nepodařilo načíst.</p>
    </div>
  )
}
