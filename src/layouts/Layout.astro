---
import { ClientRouter } from "astro:transitions";
import { Image } from "astro:assets";
import Nav from "../components/Nav.astro";
import Weather from "../components/Weather.astro";
import InstagramFeed from "../components/InstagramFeed.astro";
import { ROUTES } from "../config/routes";

// Slider images
import terasaImg from "../images/slider/terasa.jpg";
import rok1926Img from "../images/slider/rok 1926.jpg";
import pokoj14Img from "../images/slider/pokoj 14.jpg";
import okoliImg from "../images/slider/okoli.jpg";
import rutClassicImg from "../images/slider/rut-classic.jpg";
import bezdezImg from "../images/slider/bezdez.jpg";

interface Props {
  title?: string;
  description?: string;
  keywords?: string;
  showSidebar?: boolean;
}

const {
  title = "Máchovo jezero ubytování - Pension RUT, Máchovo jezero",
  description = "Pension se nachází v lázeňském městečku Staré Splavy, které jsou známé ozdravným vzduchem. Jedinečnost objektu je mimo jiné dána jeho romantickým umístěním nad Máchovým jezerem.",
  keywords = "Ubytování Máchovo jezero, dovolená, Staré Splavy",
  showSidebar = false,
} = Astro.props;
---

<!doctype html>
<html lang="cs">
  <head>
    <ClientRouter />
    <title>{title}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta
      name="google-site-verification"
      content="ib0MMyZ0nMYt6ogb31WhmOCDK3x9BZQOno3zaWLrUIA"
    />
    <meta name="keywords" content={keywords} />
    <meta name="description" content={description} />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content={`https://www.pensionrut.cz${Astro.url.pathname}`}
    />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta
      property="og:image"
      content="https://www.pensionrut.cz/theme/pensionrut/img/header-logo.jpg"
    />
    <meta property="og:locale" content="cs_CZ" />
    <meta property="og:site_name" content="Pension RUT" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:url"
      content={`https://www.pensionrut.cz${Astro.url.pathname}`}
    />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta
      name="twitter:image"
      content="https://www.pensionrut.cz/theme/pensionrut/img/header-logo.jpg"
    />

    <!-- Canonical URL -->
    <link
      rel="canonical"
      href={`https://www.pensionrut.cz${Astro.url.pathname}`}
    />

    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "LodgingBusiness",
        "name": "Pension RUT",
        "description": "První český pension na břehu Máchova jezera, který provozuje rodina Miloše Formana od roku 1926. Romantické ubytování s výhledem na jezero ve Starých Splavech.",
        "image": "https://www.pensionrut.cz/theme/pensionrut/img/header-logo.jpg",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "Lázeňský Vrch 97",
          "addressLocality": "Staré Splavy",
          "postalCode": "471 63",
          "addressCountry": "CZ"
        },
        "geo": {
          "@type": "GeoCoordinates",
          "latitude": "50.573515",
          "longitude": "14.651811"
        },
        "telephone": "+420487873213",
        "email": "recepce@pensionrut.cz",
        "url": "https://www.pensionrut.cz",
        "priceRange": "2500-3500 Kč",
        "starRating": {
          "@type": "Rating",
          "ratingValue": "4"
        },
        "checkinTime": "14:00",
        "checkoutTime": "10:00",
        "amenityFeature": [
          {
            "@type": "LocationFeatureSpecification",
            "name": "Free WiFi",
            "value": true
          },
          {
            "@type": "LocationFeatureSpecification",
            "name": "Breakfast included",
            "value": true
          },
          {
            "@type": "LocationFeatureSpecification",
            "name": "Lake view",
            "value": true
          },
          {
            "@type": "LocationFeatureSpecification",
            "name": "Private beach access",
            "value": true
          },
          {
            "@type": "LocationFeatureSpecification",
            "name": "Terrace",
            "value": true
          },
          {
            "@type": "LocationFeatureSpecification",
            "name": "Bar",
            "value": true
          }
        ]
      }
    </script>

    <link
      rel="stylesheet"
      type="text/css"
      href="/theme/pensionrut/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/theme/pensionrut/css/bootstrap-responsive.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/theme/pensionrut/css/style.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/glightbox@3.2.0/dist/css/glightbox.min.css"
    />
    <script type="text/javascript" src="/theme/pensionrut/js/scripts.min.js"
    ></script>
  </head>
  <body>
    <!-- Navbar
  ============================== -->
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button
            data-target=".nav-collapse"
            data-toggle="collapse"
            class="btn btn-navbar"
            type="button"
          >
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href={ROUTES.home} class="brand">
            <img src="/theme/pensionrut/img/mini-logo.png" alt="Pension RUT" />
          </a>
          <div class="nav-collapse collapse">
            <Nav />
          </div>
        </div>
      </div>
    </div>

    <!-- Header
  ============================== -->
    <header id="overview" class="">
      <div class="container">
        <div class="row-fluid">
          <div class="span6">
            <a href={ROUTES.home}>
              <img
                src="/theme/pensionrut/img/header-logo.jpg"
                alt="Penzion RUT"
                width="435"
                height="82"
              />
            </a>
          </div>
          <div class="span6">
            <img
              src="/theme/pensionrut/img/header-text.jpg"
              alt="Penzion RUT"
              width="272"
              height="45"
              class="headertext"
            />
          </div>
        </div>
      </div>
    </header>

    <!-- Slider
  ============================== -->

    <div class="slider">
      <div id="leftBarArrow" class="barArrow"></div>
      <div id="rightBarArrow" class="barArrow"></div>
      <div class="iosSlider">
        <div class="islider">
          <div class="item">
            <div class="caption">
              <span
                ><a href={ROUTES.home}
                  ><strong>Pension RUT</strong> | Ubytování u Máchova jezera</a
                ></span
              >
              <div class="bg"></div>
            </div>
            <a href={ROUTES.home}>
              <Image
                src={terasaImg}
                alt="Terasa Pensionu RUT s výhledem na Máchovo jezero"
                loading="eager"
              />
            </a>
          </div>
          <div class="item">
            <div class="caption">
              <span
                ><a href={ROUTES.historie}
                  ><strong>Historie</strong> | Pensionu RUT a rodiny Formanů</a
                ></span
              >
              <div class="bg"></div>
            </div>
            <a href={ROUTES.historie}>
              <Image
                src={rok1926Img}
                alt="Historická fotografie Pensionu RUT z roku 1926"
                loading="lazy"
              />
            </a>
          </div>
          <div class="item">
            <div class="caption">
              <span
                ><a href={ROUTES.ubytovani}
                  ><strong>Ubytování</strong> | Pension RUT ve Starých Splavech</a
                ></span
              >
              <div class="bg"></div>
            </div>
            <a href={ROUTES.ubytovani}>
              <Image
                src={pokoj14Img}
                alt="Pokoj č. 14 v Pensionu RUT s výhledem na jezero"
                loading="lazy"
              />
            </a>
          </div>
          <div class="item">
            <div class="caption">
              <span
                ><a href={ROUTES.okoli}
                  ><strong>Okolí</strong> | Krásná krajina Máchova jezera</a
                ></span
              >
              <div class="bg"></div>
            </div>
            <a href={ROUTES.okoli}>
              <Image
                src={okoliImg}
                alt="Okolí Pensionu RUT - krásná příroda u Máchova jezera"
                loading="lazy"
              />
            </a>
          </div>
          <div class="item">
            <div class="caption">
              <span
                ><a href={ROUTES.regata}
                  ><strong>Regata RUT Classic</strong> | Pohár Withe Queen</a
                ></span
              >
              <div class="bg"></div>
            </div>
            <a href={ROUTES.regata}>
              <Image
                src={rutClassicImg}
                alt="Regata RUT Classic - závod klasických plachetnic na Máchově jezeře"
                loading="lazy"
              />
            </a>
          </div>
          <div class="item">
            <div class="caption">
              <span
                ><a href={ROUTES.vylety}
                  ><strong>Výlety</strong> | Poznejte krásu Máchova jezera</a
                ></span
              >
              <div class="bg"></div>
            </div>
            <a href={ROUTES.vylety}>
              <Image
                src={bezdezImg}
                alt="Hrad Bezděz - výlet z Pensionu RUT"
                loading="lazy"
              />
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Content
  ============================== -->
    <div id="body">
      <div class="container">
        <div class="row-fluid">
          <div class={showSidebar ? "span8" : "span12"}>
            <slot />
          </div>

          {
            showSidebar && (
              <div class="span4">
                <h3>
                  Aktuality<small> od Máchova jezera</small>
                </h3>
                <div style="height: 2px" />
                <InstagramFeed />
                <div style="height: 5px" />
                <Weather />
              </div>
            )
          }
        </div>
      </div>
    </div>

    <!-- Footer
  ============================== -->
    <footer>
      <div class="container">
        <div class="row-fluid">
          <div class="span8">
            <p>
              Copyright © 2013 Pension RUT - Nejstarší pension na břehu Máchova
              jezera
            </p>
          </div>
          <div class="span4">
            <p>
              Created with pleasure by <a href="http://ceda.splavy.com">Ceda_</a
              >
            </p>
          </div>
        </div>
      </div>
    </footer>

    <script is:inline>
      // Načtení GLightbox dynamicky
      const loadGLightbox = () => {
        if (typeof GLightbox === "undefined") {
          const script = document.createElement("script");
          script.src =
            "https://cdn.jsdelivr.net/npm/glightbox@3.2.0/dist/js/glightbox.min.js";
          script.onload = () => initGLightbox();
          document.body.appendChild(script);
        } else {
          initGLightbox();
        }
      };

      const initGLightbox = () => {
        if (typeof GLightbox !== "undefined") {
          GLightbox({
            selector: ".lightbox",
            touchNavigation: true,
            loop: true,
            autoplayVideos: false,
          });
        }
      };

      // Reinicializace JS po Astro page transitionech
      document.addEventListener("astro:page-load", () => {
        // Reinicializace carousel/slider
        if (typeof $ !== "undefined" && $(".iosSlider").length > 0) {
          const sliderSettings = {
            infiniteSlider: true,
            snapSlideCenter: true,
            keyboardControls: true,
            navNextSelector: $("#rightBarArrow"),
            navPrevSelector: $("#leftBarArrow"),
          };

          // Na malých obrazovkách vypni centrovani
          if ($(window).width() < 979) {
            sliderSettings.snapSlideCenter = false;
          }

          $(".iosSlider").iosSlider(sliderSettings);
        }

        // Načti a inicializuj GLightbox
        loadGLightbox();
      });
    </script>
  </body>
</html>
